<app-header></app-header>

<div *ngIf="allProduct.length>0" class="row w-100 mt-5 mb-5">
    <h3 class="text-center text-danger mb-5">Cart</h3>
    <div class="col-md-1"></div>
    <div class="col-md-6" style="overflow-x: auto;">
        <table class="table table-bordered shadow ">
            <thead>
                <tr>
                    <th class="bg-secondary text-light">#</th>
                    <th class="bg-secondary text-light">Title</th>
                    <th class="bg-secondary text-light">Image</th>
                    <th class=" p-2 bg-secondary text-light">Quantity</th>
                    <th class="p-2 bg-secondary text-light">Price</th>
                    <th class="p-2 bg-secondary text-light">Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let product of allProduct, let i=index">
                    <td>{{i+1}}</td>
                    <td class="w-25">{{product.title}}</td>
                    <td class="text-center">
                        <img [src]="product.image" width="130px" height="130px" alt="no image"></td>
                    <td class="d-flex justify-content-center align-items-center">
                        <div class="d-flex">
                            <button class="btn fw-bolder fs-3" (click)="decrementItem(product._id)">-</button>
                            <input type="text"  class="form-control w-25" readonly value={{product.quantity}} >
                            <button class="btn fw-bolder fs-3" (click)="incrementItem(product._id)">+</button>
                        </div>
                    </td>
                    <td>$ {{product.price}}</td>
                    <td>
                        <button class="btn btn-danger" (click)="removeCartItem(product._id)"><i class="fa-solid fa-trash"></i></button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="d-flex mt-4 justify-content-center">
            <button class="btn btn-outline-danger" (click)="emptyCartItem()">Empty Cart</button>
            <a routerLink="/"><button class="btn btn-outline-success ms-4">Add More Items</button></a>
        </div>
    </div>
    <div class="col-md-4 d-flex justify-content-center">
        <div class="border shadow p-3 w-75 rounded" style="height: 200px;">
            <h3 class="text-success">Cart Summary</h3>
            <h5>Total number of items : {{allProduct.length}}</h5>
            <h5>Grand Total : $ {{total}}</h5>
            <button class="btn btn-success w-100 mt-3" routerLink="/checkout" (click)="chechOut()">Checkout</button>
        </div>
    </div>
    <div class="col-md-1"></div>
</div>


<div *ngIf="allProduct.length==0"  style="width: 100%;height: 80vh;display: flex; justify-content: center;align-items: center;flex-direction: column;">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrQCUTHCSBZkupPKE-iZCpSR-vECW0OCdgTg&s" alt="no image" width="30%">
    <a routerLink="/"><button class="btn btn-success"><i class="fa-solid fa-backward me-2"></i>Back Home</button></a>
</div>
